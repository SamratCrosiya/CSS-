<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supercar Speedometer</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #050505;
            background-image: radial-gradient(circle at center, #1c1c1c 0%, #000 100%);
            font-family: 'Orbitron', sans-serif;
            overflow: hidden;
        }

        /* --- Main Container --- */
        .dashboard {
            position: relative;
            width: 400px;
            height: 400px;
            border-radius: 50%;
            /* Outer rim shadow */
            box-shadow: 
                -5px -5px 10px rgba(255,255,255,0.05),
                5px 5px 20px rgba(0,0,0,0.8),
                inset 0 0 20px #000;
            background: #111;
            transition: all 0.5s ease;
        }

        /* --- Dynamic Glow States --- */
        /* Normal State: Blue Cyan */
        .dashboard.normal {
            border: 4px solid #333;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.1);
        }
        
        /* Danger State: Red */
        .dashboard.danger {
            border: 4px solid #550000;
            box-shadow: 0 0 60px rgba(255, 0, 0, 0.4);
        }

        /* --- The Dial Graphics --- */
        .dial {
            position: absolute;
            top: 10px; left: 10px; right: 10px; bottom: 10px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.05);
            background: radial-gradient(circle, #222 60%, #000 100%);
        }

        /* Inner decorative ring */
        .dial::after {
            content: '';
            position: absolute;
            top: 20%; left: 20%; width: 60%; height: 60%;
            border-radius: 50%;
            border: 1px dashed rgba(255,255,255,0.1);
        }

        /* --- Tick Marks (Generated by JS) --- */
        .tick {
            position: absolute;
            top: 0; left: 50%;
            width: 2px;
            background: #666;
            transform-origin: bottom center;
            /* Height will be set in JS */
        }
        
        .tick.major {
            background: #fff;
            width: 3px;
        }

        /* --- Numbers (Generated by JS) --- */
        .num {
            position: absolute;
            top: 0; left: 50%;
            transform-origin: bottom center;
            color: #888;
            font-size: 14px;
            font-weight: bold;
            height: 50%; /* Reach to center */
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            padding-top: 35px; /* Push number inward */
        }

        .num span {
            display: block;
            /* Counter-rotate text so it stands upright */
            /* This is handled in JS now for perfection, or we can just let them rotate */
        }

        /* --- The Needle --- */
        .needle-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            /* Initial rotation */
            transform: rotate(-135deg); 
            transition: transform 0.1s linear; /* Smooth micro-movements */
            z-index: 10;
        }

        .needle {
            position: absolute;
            top: 40px; 
            left: 50%;
            width: 6px;
            height: 50%; /* Reaches center */
            background: linear-gradient(to bottom, #ff3300 0%, #a00 80%, transparent 100%);
            transform: translateX(-50%);
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(255, 50, 0, 0.8);
        }

        /* --- Center Hub & Digital Display --- */
        .center-hub {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 140px; height: 140px;
            background: radial-gradient(circle at top left, #333, #000);
            border-radius: 50%;
            border: 3px solid #222;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            z-index: 20;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .digital-speed {
            font-size: 48px;
            font-weight: 700;
            color: #0ff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
            transition: color 0.3s;
        }

        .unit {
            font-size: 14px;
            color: #555;
            letter-spacing: 2px;
            margin-top: -5px;
        }

        /* --- Danger Mode Colors --- */
        .dashboard.danger .digital-speed {
            color: #ff3333;
            text-shadow: 0 0 15px rgba(255, 0, 0, 0.8);
        }

        .dashboard.danger .tick.major {
            background: #ffaaaa;
            box-shadow: 0 0 5px red;
        }

    </style>
</head>
<body>

    <div class="dashboard normal" id="dashboard">
        <div class="dial" id="dial">
            </div>

        <div class="center-hub">
            <div class="digital-speed" id="digital-display">0</div>
            <div class="unit">MPH</div>
        </div>

        <div class="needle-container" id="needle">
            <div class="needle"></div>
        </div>
    </div>

    <script>
        // --- Configuration ---
        const MAX_SPEED = 200;
        const TARGET_SPEED = 120; // Where it loops back
        
        // The speedometer usually spans about 270 degrees (leaving bottom open)
        // Let's say it starts at -135deg and ends at +135deg
        const START_DEG = -135;
        const END_DEG = 135;
        const TOTAL_DEG = END_DEG - START_DEG; // 270 degrees total
        
        const dial = document.getElementById('dial');
        const needle = document.getElementById('needle');
        const display = document.getElementById('digital-display');
        const dashboard = document.getElementById('dashboard');

        // --- 1. Setup the UI (Ticks & Numbers) ---
        function createDial() {
            // We want ticks every 2 MPH (small) and 20 MPH (large)
            for (let i = 0; i <= MAX_SPEED; i += 2) {
                // Calculate rotation
                const percent = i / MAX_SPEED;
                const rotation = START_DEG + (percent * TOTAL_DEG);
                
                // Create Tick
                const tick = document.createElement('div');
                tick.className = (i % 20 === 0) ? 'tick major' : 'tick';
                
                // Height: major ticks are longer
                tick.style.height = (i % 20 === 0) ? '20px' : '10px';
                tick.style.transform = `translateX(-50%) rotate(${rotation}deg)`;
                // Push tick to edge (dial radius is approx 190px internal)
                // We actually translate the wrapper 190px up
                tick.style.transformOrigin = "center 190px"; 
                
                dial.appendChild(tick);

                // Add Numbers (only for Major ticks)
                if (i % 20 === 0) {
                    const numWrap = document.createElement('div');
                    numWrap.className = 'num';
                    // Rotate the wrapper to position
                    numWrap.style.transform = `translateX(-50%) rotate(${rotation}deg)`;
                    numWrap.style.height = "100%"; // Full height to use center origin
                    
                    // The actual number text
                    const span = document.createElement('span');
                    span.innerText = i;
                    // Counter-rotate the text so it's always vertical/readable
                    span.style.transform = `rotate(${-rotation}deg)`;
                    
                    numWrap.appendChild(span);
                    dial.appendChild(numWrap);
                }
            }
        }

        // --- 2. Animation Logic ---
        let currentSpeed = 0;
        let isAccelerating = true;

        function animate() {
            // Physics simulation
            if (isAccelerating) {
                // Accelerate: Start fast, slow down as we reach top speed (Easing)
                // Using a simple increment for "smoothness" requested
                currentSpeed += 0.8; 
                if (currentSpeed >= TARGET_SPEED) {
                    currentSpeed = TARGET_SPEED;
                    isAccelerating = false;
                }
            } else {
                // Decelerate: Brakes are usually harder than gas
                currentSpeed -= 1.2;
                if (currentSpeed <= 0) {
                    currentSpeed = 0;
                    isAccelerating = true;
                }
            }

            updateSpeedometer(currentSpeed);
            requestAnimationFrame(animate);
        }

        function updateSpeedometer(speed) {
            // 1. Calculate Needle Angle
            const percent = speed / MAX_SPEED;
            const deg = START_DEG + (percent * TOTAL_DEG);
            needle.style.transform = `rotate(${deg}deg)`;

            // 2. Update Digital Display
            display.innerText = Math.round(speed);

            // 3. Handle "Red Zone" Glow
            // If speed > 100, turn on Danger mode
            if (speed > 100) {
                dashboard.classList.add('danger');
                dashboard.classList.remove('normal');
            } else {
                dashboard.classList.add('normal');
                dashboard.classList.remove('danger');
            }
        }

        // --- Start ---
        createDial();
        animate();

    </script>
</body>
</html>